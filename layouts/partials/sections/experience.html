{{ if .Site.Params.experience.enable | default false }}
<section id="experience" class="py-5">
    <div class="container">
        <h3 class="text-center">{{ .Site.Params.experience.title | default "Experience" }}</h3>
        <div class="row justify-content-center">
            <div class="col-sm-12 col-md-8 col-lg-8 py-5">
                <div class="experience-container px-3 pt-2">
                    {{ $companies := dict }}
                    {{ range .Site.Params.experience.items }}
                        {{ $companyName := .company }}
                        {{ if not (isset $companies $companyName) }}
                            {{/* Inisialisasi slice baru untuk perusahaan yang belum ada */}}
                            {{ $companies = merge $companies (dict $companyName (slice .)) }}
                        {{ else }}
                            {{/* Ambil slice saat ini dan tambahkan item baru */}}
                            {{ $currentItems := index $companies $companyName }}
                            {{ $newSlice := append $currentItems (dict "job" .job "companyUrl" .companyUrl "company" .company "date" .date "content" .content) }}
                            {{ $companies = merge $companies (dict $companyName $newSlice) }}
                        {{ end }}
                    {{ end }}
                    <ul class="nav nav-pills mb-3 bg-transparent primary-font" id="pills-tab" role="tablist">
                        {{ range $company, $details := $companies }}
                            <li class="nav-item px-1 bg-transparent" role="presentation">
                                <a 
                                    class="nav-link bg-transparent" 
                                    id='pills-{{ $company | urlize }}-tab'
                                    data-bs-toggle="pill"
                                    href='#pills-{{ $company | urlize }}' 
                                    role="tab" 
                                    aria-controls='pills-{{ $company | urlize }}'
                                    aria-selected="false"
                                >
                                    {{ $company }}
                                </a>
                            </li>
                        {{ end }}
                    </ul>
                    <div class="tab-content pb-5 pt-2 bg-transparent primary-font" id="pills-tabContent">
                        {{ range $company, $details := $companies }}
                            <div class="tab-pane fade" id="pills-{{ $company | urlize }}" role="tabpanel" aria-labelledby="pills-{{ $company | urlize }}-tab">
                                {{ range $details }}
                                    <div>
                                        <span class="h4">{{ .job }}</span>
                                        <small>-</small>
                                        <a href="{{ .companyUrl }}" target="_blank">{{ .company }}</a>
                                        <div class="pb-1">
                                            <small>{{ .date }}</small>
                                        </div>
                                        <div class="pt-2">
                                            {{ .content | markdownify }}
                                        </div>
                                    </div>
                                {{ end }}
                            </div>
                        {{ end }}
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{{ end }}
